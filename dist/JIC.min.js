/*
 * JIC JavaScript Library v1.1.1
 * https://github.com/brunobar79/J-I-C/
 *
 * Copyright 2015, Bruno Barbieri
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: Tue May 19 21:30:03 2015 -0400
 */
var jic={compress:function(c,h,g){var e="image/jpeg";if(typeof g!=="undefined"&&g=="png"){e="image/png"}var f=document.createElement("canvas");f.width=c.naturalWidth;f.height=c.naturalHeight;var a=f.getContext("2d").drawImage(c,0,0);var d=f.toDataURL(e,h/100);var b=new Image();b.src=d;return b},upload:function(h,l,a,b,e,j,n,c,k){var i=document.createElement("canvas");i.width=h.naturalWidth;i.height=h.naturalHeight;var p=i.getContext("2d").drawImage(h,0,0);if(XMLHttpRequest.prototype.sendAsBinary===undefined){XMLHttpRequest.prototype.sendAsBinary=function(r){var q=Array.prototype.map.call(r,function(s){return s.charCodeAt(0)&255});this.send(new Uint8Array(q).buffer)}}var m="image/jpeg";if(b.substr(-4)==".png"){m="image/png"}var g=i.toDataURL(m);g=g.replace("data:"+m+";base64,","");var o=new XMLHttpRequest();if(k&&typeof k==="string"){o.open(k,l,true)}else{o.open("POST",l,true)}var d="someboundary";o.setRequestHeader("Content-Type","multipart/form-data; boundary="+d);if(c&&typeof c==="object"){for(var f in c){o.setRequestHeader(f,c[f])}}if(n&&n instanceof Function){o.onprogress=function(q){if(q.lengthComputable){return(q.loaded/q.total)*100}}}o.sendAsBinary(["--"+d,'Content-Disposition: form-data; name="'+a+'"; filename="'+b+'"',"Content-Type: "+m,"",atob(g),"--"+d+"--"].join("\r\n"));o.onreadystatechange=function(){if(this.readyState==4){if(this.status==200){e(this.responseText)}else{if(this.status>=400){if(j&&j instanceof Function){j(this.responseText)}}}}}}};